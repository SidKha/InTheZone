int armPosition = 0;

const int ERR_MTRPWR_RATIO = 5;
const int MTR_THRESH = 20
const int MAX_ARM = 3000;
const int MIN ARM = 500;
const int ARM_POS_CHANGE_RATE = 10000;
cont int JOY_THRESH = 10;

int motorPower = 0;

task keepArmStraight(){
  while(true){
    motorPower = (armPosition - SensorValue[armPot]) * ERR_MTRPWR_RATIO;
    motor[arm] = abs(motorPower) > MTR_THRESH ? motorPower : 0;
    endTimeSlice();
  }
}

task main(){
  StartTask(keepArmStraight);
  while(true){
    if(abs(vexRT[Ch2]) > JOY_THRESH){
      if(armPos < MAX_ARM && armPos > MIN_ARM){
        armPos += sgn(vexRT[Ch2]);
      }
      wait1Msec(ARM_POS_CHANGE_RATE / vexRT[Ch2]);
    }
    endTimeSlice();
  }
}
